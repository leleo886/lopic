import{d as S,C as U,f as p,c as V,a as o,l as s,x as l,E as b,t as g,i as r,G as R,z as N,H as B,I as u,o as I,J as _,_ as M}from"./index-QwL2gIV2.js";import{a as A}from"./services-DL6wjq8D.js";import{g as T}from"./errorMessages-CmCcllaB.js";import"./axios-Cl3Sb8ms.js";const j={class:"login-container"},D={class:"login-card"},G={class:"login-header"},H={class:"language-selector"},J={class:"login-title"},P={class:"login-subtitle"},$={class:"login-body"},K={class:"login-footer"},O=S({__name:"RegisterView",setup(Q){const{t:e}=U(),y=R("currentLanguage",p("zh")),x=R("changeLanguage",t=>{}),d=p(y.value),C=t=>{const a=t.target.value;d.value=a,x(a)},h=N(),v=p(),f=p(!1),i=B({username:"",email:"",password:""}),z={username:[{required:!0,message:()=>e("register.validation.usernameRequired"),trigger:"blur"}],email:[{required:!0,message:()=>e("register.validation.emailRequired"),trigger:"blur"},{type:"email",message:()=>e("register.validation.emailFormat"),trigger:"blur"}],password:[{required:!0,message:()=>e("register.validation.passwordRequired"),trigger:"blur"},{min:6,message:()=>e("register.validation.passwordLength"),trigger:"blur"}]},L=async()=>{if(v.value)try{await v.value.validate(),f.value=!0;const t=await A.register({...i,locale:d.value});console.log(t.data),t.data.message==="Register_EmailSent"?_.success(e("register.emailSent")):t.data.message==="Register_NoMail"?_.success(e("register.registerSuccess")):_.success(e("register.registerSuccess")),h.push("/login")}catch(t){const a=t.response?.data?.code,c=a?T(a):e("register.registerFailed");_.error(c)}finally{f.value=!1}};return(t,a)=>{const c=u("a-radio-button"),k=u("a-radio-group"),w=u("a-input"),m=u("a-form-item"),q=u("a-input-password"),E=u("a-button"),F=u("a-form");return I(),V("div",j,[o("div",D,[o("div",G,[o("div",H,[s(k,{value:d.value,"onUpdate:value":a[0]||(a[0]=n=>d.value=n),onChange:C},{default:l(()=>[s(c,{value:"zh"},{default:l(()=>[...a[5]||(a[5]=[b("中文",-1)])]),_:1}),s(c,{value:"en"},{default:l(()=>[...a[6]||(a[6]=[b("English",-1)])]),_:1})]),_:1},8,["value"])]),o("h1",J,g(r(e)("login.title")),1),o("p",P,g(r(e)("register.subtitle")),1)]),o("div",$,[s(F,{model:i,rules:z,ref_key:"registerFormRef",ref:v,onFinish:L},{default:l(()=>[s(m,{name:"username",label:r(e)("register.username")},{default:l(()=>[s(w,{value:i.username,"onUpdate:value":a[1]||(a[1]=n=>i.username=n),placeholder:r(e)("register.enterUsername"),size:"large","prefix-icon":"user"},null,8,["value","placeholder"])]),_:1},8,["label"]),s(m,{name:"email",label:r(e)("register.email")},{default:l(()=>[s(w,{value:i.email,"onUpdate:value":a[2]||(a[2]=n=>i.email=n),placeholder:r(e)("register.enterEmail"),size:"large","prefix-icon":"mail"},null,8,["value","placeholder"])]),_:1},8,["label"]),s(m,{name:"password",label:r(e)("register.password")},{default:l(()=>[s(q,{value:i.password,"onUpdate:value":a[3]||(a[3]=n=>i.password=n),placeholder:r(e)("register.enterPassword"),size:"large","prefix-icon":"lock",visibilityToggle:""},null,8,["value","placeholder"])]),_:1},8,["label"]),s(m,null,{default:l(()=>[s(E,{type:"primary","html-type":"submit",class:"login-button",size:"large",loading:f.value},{default:l(()=>[b(g(r(e)("register.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",K,[o("span",null,g(r(e)("register.hasAccount")),1),o("a",{onClick:a[4]||(a[4]=n=>r(h).push("/login")),class:"login-link"},g(r(e)("register.login")),1)])])])])}}}),ee=M(O,[["__scopeId","data-v-c00e3648"]]);export{ee as default};
